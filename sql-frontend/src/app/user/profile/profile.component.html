<mat-toolbar class="tutor-toolbar" color="primary">
    <span style="font-weight: bold; margin-right: 24px;">SQL-Übungsplatform</span>
  <span class="toolbar-divider"></span>
</mat-toolbar>

<div class="profile-layout">
  <div class="profile-sidenav-header">Account</div>
  <nav class="profile-sidenav">
    <ul>
      <li [class.active]="selectedTab === 'profile'" (click)="selectedTab = 'profile'">
        <mat-icon>person</mat-icon>
        <span>Profil</span>
      </li>
      <li [class.active]="selectedTab === 'password'" (click)="selectedTab = 'password'">
        <mat-icon>lock</mat-icon>
        <span>Passwort ändern</span>
      </li>
    </ul>
  </nav>

  <!-- Content -->
  <div class="profile-content">

    <div *ngIf="loading" class="loading">
      Lade Profildaten...
    </div>
    <div *ngIf="error" class="error">
      {{ error }}
    </div>

    <!-- Profil-Info -->
    <div *ngIf="user && !loading && selectedTab === 'profile'" class="user-profile">
  <mat-card class="profile-card">
    <mat-card-content>
      <div>
        <div class="profile-info-row">
          <strong>Name:</strong>
          <span>{{ user.name }}</span>
        </div>
        <div class="profile-info-row">
          <strong>E-Mail:</strong>
          <span>{{ user.email }}</span>
        </div>
        <div class="profile-info-row">
          <strong>Rolle:</strong>
          <span>{{ user.role }}</span>
        </div>
        <div class="profile-info-row">
          <strong>Erstellt am:</strong>
          <span>{{ user.createdAt | date:'dd.MM.yyyy' }}</span>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

    <!-- Passwort ändern -->
    <div *ngIf="user && !loading && selectedTab === 'password'" class="password-section">
  <mat-card class="password-card">
    <mat-card-header>
      <mat-card-title>
        Passwort ändern
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="passwordForm" (ngSubmit)="changePassword()" class="password-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Aktuelles Passwort</mat-label>
          <input matInput type="password" formControlName="currentPassword" required>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Neues Passwort</mat-label>
          <input matInput type="password" formControlName="newPassword" required minlength="6">
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Neues Passwort bestätigen</mat-label>
          <input matInput type="password" formControlName="confirmPassword" required>
        </mat-form-field>
        <div *ngIf="passwordForm.errors?.['passwordMismatch'] && passwordForm.get('confirmPassword')?.touched" class="error">
          Die Passwörter stimmen nicht überein.
        </div>
        <div *ngIf="passwordChangeError" class="error">{{ passwordChangeError }}</div>
        <div *ngIf="passwordChangeSuccess" class="success">{{ passwordChangeSuccess }}</div>
        <div class="action-buttons">
          <button mat-raised-button color="primary" type="submit" [disabled]="passwordForm.invalid || isChangingPassword">
            {{ isChangingPassword ? 'Ändere...' : 'Passwort ändern' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

    <div class="action-buttons" style="margin-top: 32px;">
      <button mat-stroked-button color="primary" [routerLink]="['/overview']">
        <mat-icon>arrow_back</mat-icon>
        Zur Übersicht
      </button>
    </div>
  </div>
</div>