<mat-toolbar class="tutor-toolbar" color="primary">
  <span style="font-weight: bold; margin-right: 24px;">SQL-Übungsplatform</span>
  <span class="toolbar-divider"></span>
  <a routerLink="/student" class="nav-link mat-button" *ngIf="(isStudent$ | async) || (isAdmin$ | async)">Student-Dashboard</a>
  <a routerLink="/tutor-dashboard" class="nav-link mat-button" *ngIf="(isTutor$ | async) || (isAdmin$ | async)">Tutor-Dashboard</a>
  <a routerLink="/admin" class="nav-link mat-button" *ngIf="isAdmin$ | async">Admin-Dashboard</a>
</mat-toolbar>

<div class="overview-container">
  <h1>Übersicht</h1>
  <div class="overview-blue-bar"></div>

  <div *ngIf="isStudent$ | async as isStudent">
  <div class="progress-container" *ngIf="isStudent" style="display: flex; align-items: center;">
    <div>
      <p>Du hast {{ progressPercent }}% der Übungen abgeschlossen</p>
      <div class="custom-progress-bar-outer">
        <div class="custom-progress-bar-inner" [style.width.%]="progressPercent"></div>
      </div>
    </div>
    <mat-card class="worksheet-stats-card">
      <div class="stats-header">
        <span>Dein Fortschritt</span>
      </div>
      <div class="stats-content">
        <div class="stat-block">
          <span class="stat-label">Bearbeitet</span>
          <span class="stat-value">{{ submittedWorksheets }}</span>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-block">
          <span class="stat-label">Zu bearbeiten</span>
          <span class="stat-value">{{ totalWorksheets - submittedWorksheets }}</span>
        </div>
      </div>
    </mat-card>
  </div>
</div>
  
  <div class="task-list-container">
  <div style="display: flex; align-items: center; margin-bottom: 24px; justify-content: flex-start;">
    <h2 style="font-weight: 600; font-size: 2rem; color: #3f51b5; display: flex; align-items: center; margin: 0;">
      <mat-icon style="margin-right: 10px; color: #3f51b5;">assignment</mat-icon>
      Aufgabenliste
    </h2>
    <div class="custom-search-field" style="min-width: 300px; max-width: 400px; margin-left: 600px;">
      <input
        class="custom-input"
        type="text"
        placeholder="Suchen nach Titel..."
        [(ngModel)]="searchTerm"
        style="width: 100%; padding: 10px 16px; border-radius: 32px; border: 1.5px solid #bdbdbd;"
      />
    </div>
  </div>
  <div>
    <div class="empty-state" *ngIf="filteredWorksheets.length === 0">
      <mat-icon style="font-size: 3rem; color: #bdbdbd;">assignment_late</mat-icon>
      <div style="margin-top: 8px; color: #888;">Keine Übungsblätter verfügbar.</div>
    </div>
    <div class="task-list-grid" *ngIf="filteredWorksheets.length > 0">
      <mat-card *ngFor="let worksheet of filteredWorksheets" class="worksheet-list-card">
        <mat-card-header>
          <div mat-card-avatar class="worksheet-avatar">
            <mat-icon>description</mat-icon>
          </div>
          <div class="worksheet-header-content">
            <mat-card-title>{{ worksheet.title }}</mat-card-title>
            <mat-card-subtitle>Datenbank: {{ worksheet.database }}</mat-card-subtitle>
          </div>
        </mat-card-header>
        <mat-card-content>
          <div class="worksheet-description">
            {{ worksheet.description || 'Keine Beschreibung vorhanden.' }}
          </div>
          <div class="worksheet-tasks">
            <mat-icon>list_alt</mat-icon>
            <span>{{ worksheet.tasks?.length || 0 }} Aufgabe(n)</span>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-flat-button color="primary" class="open-btn" [routerLink]="['/student/worksheet', worksheet.id]">
            <mat-icon class="open-btn-icon">open_in_new</mat-icon>
            <span>Bearbeiten</span>
          </a>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
